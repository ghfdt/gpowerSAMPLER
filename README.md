# gpowerSAMPLER -  Power Monitoring Tool for GPUs

``gpowerSAMPLER`` is a command line tool for monitoring power consumption on a GPU device for a given application implemented along with the research presented in [1].

To get more information of how to install or use it, please keep reading this file.

Also, if you use the ``gpowerSAMPLER`` tool in a publication, please cite:

[1] João Guerreiro, Aleksandar Ilic, Nuno Roma, Pedro Tomás. GPGPU Power Modelling for Multi-Domain Voltage-Frequency Scaling. 24th IEEE International Symposium on High-Performance Computing Architecture (HPCA), 2018.

## 1. Contact

If you have problems, questions, ideas or suggestions, please contact us by e-mail at joao.guerreiro@inesc-id.pt.

## 2. Install

The installation process should follow the procedure explained below:

* Go into root directory:
    - Compile the tool:

        ``make``

    - Install it as a shell command (optional, root privileges required):

        ``sudo make install``

## 3. Usage

* Usage:
```
gpowerSAMPLER [-d device_id] [-e] [-t power_level] [-s sample_time_ms] [-f end_time_s] [-w] -a application_to_monitor
gpowerSAMPLER -h
gpowerSAMPLER -i
```

* Options:

    ``-d`` : device id

    ``-a`` : application to be executed, containing one or multiple GPU kernels.

    ``-t`` : indicates a GPU power value, above which the power samples will be considered for the average power calculation.

    ``-e`` : calculates the energy consumed

    ``-s`` : sample time in milliseconds ( default is 16 ). This time refers to the time interval between measurements.

    ``-f`` : time interval in seconds ( default is 0 ) to continue sampling the power readings after the application GPU kernels have finished.

    ``-w`` : samples the performance state (core and memory utilizations), instead of the power consumption.

    ``-h`` : shows 'USAGE' section of this file

    ``-i`` : shows 'ADITIONAL INFORMATION' section of this file

## 5. Power Information

Power samples are obtained using the ``nvmlDeviceGetPowerUsage()`` function from the NVIDIA NVML library [2], which retrieves information from the Power sensor contained in some NVIDIA GPU devices. Accordingly, ``gpowerSAMPLER`` can only be used with devices that support this function.

## 6. Plotting Information

The *.csv* files generated by ``gpowerSAMPLER`` are useful to see the evolution of the power consumption on the GPU device, especially when using their data to plot a chart of the power consumption over time.

## REFERENCES
[1] João Guerreiro, Aleksandar Ilic, Nuno Roma, Pedro Tomás. [GPGPU Power Modelling for Multi-Domain Voltage-Frequency Scaling](https://ieeexplore.ieee.org/abstract/document/8327055). 24th IEEE International Symposium on High-Performance Computing Architecture (HPCA), 2018.

[2] [NVIDIA. NVML API Reference Guide, vR331](http://docs.nvidia.com/deploy/pdf/NVML_API_Reference_Guide.pdf)
